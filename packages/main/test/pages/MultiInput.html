<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>ui5-multi-input</title>

	<script src="../../webcomponentsjs/webcomponents-loader.js"></script>
	<script src="../../resources/bundle.esm.js" type="module"></script>
	<script nomodule src="../../resources/bundle.es5.js"></script>

	<script>delete Document.prototype.adoptedStyleSheets;</script>

	<style>
		ui5-multi-input {
			/* width: 100%; */
		}

		.footer {
			display: flex;
			justify-content: flex-end;
			align-items: center;
			padding: .25rem .5rem;
			box-sizing: border-box;
			width: 100%;
		}

		.footer ui5-button:not(:last-child) {
			margin-right: 1rem;
		}
	</style>
</head>

<body style="background-color: var(--sapBackgroundColor);" class="ui5-content-density-compact">
	<ui5-multi-input>

	</ui5-multi-input>

	<br>
	<br>

	<ui5-multi-input show-value-help-icon id="vh">

	</ui5-multi-input>

	<br>
	<br>

	<ui5-multi-input show-value-help-icon>
		<ui5-icon slot="icon" name="decline"></ui5-icon>
	</ui5-multi-input>

	<br>
	<br>

	<ui5-button id="add-btn">
		Add token
	</ui5-button>

	<br>
	<br>

	<h3>With suggeestions</h3>

	<br>
	<br>

	<ui5-multi-input show-suggestions show-value-help-icon id="suggestion-token">
		<ui5-suggestion-item text="Cozy"></ui5-suggestion-item>
		<ui5-suggestion-item text="Compact"></ui5-suggestion-item>
		<ui5-suggestion-item text="Condensed"></ui5-suggestion-item>
		<ui5-suggestion-item text="Cozy"></ui5-suggestion-item>
		<ui5-suggestion-item text="Compact"></ui5-suggestion-item>
		<ui5-suggestion-item text="Condensed"></ui5-suggestion-item>
	</ui5-multi-input>

	<ui5-dialog id="dialog" header-text="Add Competency">

		<ui5-list id="tokens-list">

		</ui5-list>

		<div slot="footer" class="footer">
			<ui5-button design="Emphasized">Save</ui5-button>
			<ui5-button>Cancel</ui5-button>
		</div>
	</ui5-dialog>


	<script>
		document.querySelector("#add-btn").addEventListener("click", event => {
			[].forEach.call(document.querySelectorAll("ui5-multi-input"), (el) => {
				const token = document.createElement("ui5-token");
				token.setAttribute("text", "Test");
				token.setAttribute("slot", "tokens");

				el.appendChild(token);
			});
		});

		document.getElementById("vh").addEventListener("ui5-value-help-icon-press", function (event) {
			alert("test");
		});

		document.getElementById("suggestion-token").addEventListener("ui5-value-help-icon-press", function (event) {
			var list = document.getElementById("tokens-list");

			list.innerHTML = "";

			event.target.tokens.forEach(function(token) {
				var li = document.createElement("ui5-li");
				li.innerHTML = token.text;

				list.appendChild(li);
			});
			
			document.getElementById("dialog").open();
		});

		document.getElementById("suggestion-token").addEventListener("ui5-suggestion-item-select", function(event) {
			var item = event.detail.item;
			var mi = event.target
			var token = document.createElement("ui5-token");

			token.setAttribute("text", item.text);
			token.setAttribute("slot", "tokens");
			event.target.appendChild(token);

			// discuss ?!
			event.target.value = "";
		});
	
		document.getElementById("suggestion-token").addEventListener("ui5-token-delete", function(event) {
			var mi = event.target;

			mi.removeChild(event.detail.token);

			// discuss ?!
			// mi.focus();
		});
	</script>
</body>

</html>