<div
	class="ui5-select-root ui5-input-focusable-element"
	id="{{_id}}-select"
	@click="{{_onclick}}"
>
	{{#if selectedOptionIcon}}
		<ui5-icon
			aria-hidden="true"
			class="ui5-select-option-icon"
			name="{{selectedOptionIcon}}"
		></ui5-icon>
	{{/if}}
	<div class="ui5-select-label-root"
		data-sap-focus-ref
		tabindex="{{_effectiveTabIndex}}"
		role="combobox"
		aria-haspopup="listbox"
		aria-label="{{ariaLabelText}}"
		aria-describedby="{{valueStateTextId}}"
		aria-disabled="{{isDisabled}}"
		aria-required="{{required}}"
		aria-readonly="{{readonly}}"
		aria-expanded="{{_isPickerOpen}}"
		aria-roledescription="{{_ariaRoleDescription}}"
		@keydown="{{_onkeydown}}"
		@keypress="{{_handleKeyboardNavigation}}"
		@keyup="{{_onkeyup}}"
		@focusin="{{_onfocusin}}"
		@focusout="{{_onfocusout}}"
	>
		{{#if hasCustomLabel}}
			<slot name="label"></slot>
		{{else}}
			{{text}}
		{{/if}}
	</div>

	{{#unless readonly}}
		<ui5-icon
			name="slim-arrow-down"
			input-icon
			?pressed="{{_iconPressed}}"
		></ui5-icon>
	{{/unless}}

	{{#if hasValueState}}
		<span id="{{_id}}-valueStateDesc" class="ui5-hidden-text">{{valueStateText}}</span>
	{{/if}}
	<slot name="formSupport"></slot>

	{{#if options}}
		<ui5-responsive-popover
			hide-arrow
			_disable-initial-focus
			placement="Bottom"
			class="ui5-select-popover {{classes.popover}}"
			horizontal-align="Left"
			@ui5-after-open="{{_afterOpen}}"
			@ui5-before-open="{{_beforeOpen}}"
			@ui5-after-close="{{_afterClose}}"
			@keydown="{{_onkeydown}}"
			style={{styles.responsivePopover}}
		>
			{{#if _isPhone}}
				<div slot="header" class="ui5-responsive-popover-header">
					<div class="row">
						<span>{{_headerTitleText}}</span>
						<ui5-button
							class="ui5-responsive-popover-close-btn"
							icon="decline"
							design="Transparent"
							@click="{{_toggleRespPopover}}"
						>
						</ui5-button>
					</div>
					{{#if hasValueStateText}}
						<div class="{{classes.popoverValueState}} row ui5-select-value-state-dialog-header">
							{{> valueStateMessage}}
						</div>
					{{/if}}
				</div>
			{{/if}}
			{{#unless _isPhone}}
				{{#if hasValueStateText}}
					<div class="{{classes.popoverValueState}}" style={{styles.responsivePopoverHeader}}>
						<ui5-icon class="ui5-input-value-state-message-icon" name="{{_valueStateMessageInputIcon}}"></ui5-icon>
						{{> valueStateMessage}}
					</div>
				{{/if}}
			{{/unless}}

			<ui5-list
				mode="SingleSelectAuto"
				separators="None"
				@mousedown="{{_itemMousedown}}"
				@ui5-item-click="{{_handleItemPress}}"
			>
				{{#each selectOptions}}
					<ui5-li-custom
						id="{{this.id}}-li"
						icon="{{this.icon}}"
						?selected="{{this.selected}}"
						?focused="{{this.focused}}"
						title="{{this.title}}"
						additional-text="{{this.additionalText}}"
						?aria-selected="{{this.selected}}"
						data-ui5-stable="{{this.stableDomRef}}">
						<slot name="{{this._individualSlot}}"></slot>
					</ui5-li-custom>
				{{/each}}
			</ui5-list>
		</ui5-responsive-popover>
	{{/if}}

	{{#if shouldOpenValueStateMessagePopover}}
		<ui5-popover
			skip-registry-update
			_disable-initial-focus
			prevent-focus-restore
			hide-arrow
			class="ui5-valuestatemessage-popover"
			placement="Bottom"
			horizontal-align="Left"
		>
			<div class="{{classes.popoverValueState}}" style="{{styles.popoverHeader}}">
				<ui5-icon class="ui5-input-value-state-message-icon" name="{{_valueStateMessageInputIcon}}"></ui5-icon>
				{{> valueStateMessage}}
			</div>
		</ui5-popover>
	{{/if}}

</div>

{{#*inline "valueStateMessage"}}
	{{#if shouldDisplayDefaultValueStateMessage}}
		{{valueStateText}}
	{{else}}
		{{#each valueStateMessageText}}
			{{this}}
		{{/each}}
	{{/if}}
{{/inline}}
