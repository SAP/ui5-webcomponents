<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Shell Bar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<script data-ui5-config type="application/json">
		{
			"rtl": false
		}
	</script>


	<script src="%VITE_BUNDLE_PATH%" type="module"></script>


	<link rel="stylesheet" type="text/css" href="./styles/ShellBar.css">
</head>

<body class="shellbar1auto">

<ui5-menu id="menuSubs" opener="btnOpenBasic">
	<ui5-menu-item text="New File" icon="add-document"></ui5-menu-item>
	<ui5-menu-item text="New Folder" icon="add-folder" disabled></ui5-menu-item>
	<ui5-menu-item text="Open" icon="open-folder" starts-section>
		<ui5-menu-item text="Open Locally" icon="open-folder">
			<ui5-menu-item text="Open from C"></ui5-menu-item>
			<ui5-menu-item text="Open from D"></ui5-menu-item>
			<ui5-menu-item text="Open from E"></ui5-menu-item>
		</ui5-menu-item>
		<ui5-menu-item text="Open from Cloud"></ui5-menu-item>
	</ui5-menu-item>
	<ui5-menu-item text="Save" icon="save">
		<ui5-menu-item text="Save Locally" icon="save">
			<ui5-menu-item text="Save on C" icon="save"></ui5-menu-item>
			<ui5-menu-item text="Save on D" icon="save"></ui5-menu-item>
			<ui5-menu-item text="Save on E" icon="save"></ui5-menu-item>
		</ui5-menu-item>
		<ui5-menu-item text="Save on Cloud" icon="upload-to-cloud"></ui5-menu-item>
	</ui5-menu-item>
	<ui5-menu-item text="Close"></ui5-menu-item>
	<ui5-menu-item text="Preferences" icon="action-settings" starts-section></ui5-menu-item>
	<ui5-menu-item text="Exit" icon="journey-arrive"></ui5-menu-item>
	</ui5-menu>

<ui5-shellbar
	id="shellbar"
	primary-title="S/4HANA Cloud"
	show-notifications
	>
	<ui5-button icon="menu2" slot="startButton"></ui5-button>
	<ui5-button icon="nav-back" slot="startButton"></ui5-button>

	<img src="https://upload.wikimedia.org/wikipedia/commons/5/59/SAP_2011_logo.svg" slot="logo"/>

	<ui5-tag design="Set2" color-scheme="10" slot="content">EMEA</ui5-tag>
	<ui5-button id="btnOpenBasic" end-icon="slim-arrow-down" data-hide-order="9" slot="content">Delieries overdue for billing neeed more text because of a bug</ui5-button>

	<ui5-shellbar-spacer slot="content"></ui5-shellbar-spacer>

	<div slot="content" style="display: flex; align-items: center;">
		<ui5-label>New Version</ui5-label>
		<ui5-switch checked></ui5-switch>
	</div>

	<ui5-input placeholder="Instructions" slot="searchField" show-suggestions value-state="Information">
		<div slot="valueStateMessage">Instructions</div>
	</ui5-input>

	<ui5-toggle-button id="assistant" icon="sap-icon://da" slot="assistant" text="Assitant" title="Assitant"></ui5-toggle-button>
	<ui5-avatar slot="profile">
		<img src="./img/John_Miller.png" alt="John Miller">
	</ui5-avatar>
</ui5-shellbar>

<script>
	const menuSubs = document.getElementById("menuSubs");
	const btnOpenBasic = document.getElementById("btnOpenBasic");

	btnOpenBasic.addEventListener("click", () => {
		menuSubs.open = true;
	});

	const shellbar = document.getElementById("shellbar");
	const arrowButtonOnly = document.createElement("ui5-button");
	arrowButtonOnly.id = "arrowButtonOnly";
	arrowButtonOnly.endIcon = "slim-arrow-down";
	arrowButtonOnly.slot = "content";
	arrowButtonOnly.setAttribute("data-hide-order", "never");
	arrowButtonOnly.addEventListener("click", () => {
		menuSubs.open = true;
	});

	function displayMenuOpener(compact) {
		if (compact) {
			shellbar.insertBefore(arrowButtonOnly, shellbar.querySelector("ui5-tag"));
		} else {
			arrowButtonOnly.remove();
		}
	}

	shellbar.addEventListener("content-item-visibility-change", (event) => {
		const hiddenItems = event.detail.items;
		displayMenuOpener(hiddenItems.indexOf(btnOpenBasic) > -1);
	});
</script>

</body>
</html>
