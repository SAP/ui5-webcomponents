"use strict";(self.webpackChunk_ui5_webcomponents_website=self.webpackChunk_ui5_webcomponents_website||[]).push([[5889],{32394:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var s=t(31085),o=t(71184);const i={},r="Events",c={id:"docs/development/events",title:"Events",description:"In this article, we will discuss events in the context of UI5 Web Components.",source:"@site/docs/docs/4-development/05-events.md",sourceDirName:"docs/4-development",slug:"/docs/development/events",permalink:"/webcomponents/docs/development/events",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"documentationSidebar",previous:{title:"Slots",permalink:"/webcomponents/docs/development/slots"},next:{title:"Lifecycle Methods",permalink:"/webcomponents/docs/development/lifecycle-hooks"}},d={},l=[{value:"The <code>@event</code> Decorator",id:"the-event-decorator",level:2},{value:"Usage",id:"usage",level:2},{value:"<code>eventDetails</code> (recommended)",id:"eventdetails-recommended",level:2},{value:"Extending the <code>eventDetails</code> with more events",id:"extending-the-eventdetails-with-more-events",level:3},{value:"Event Detail (deprecated)",id:"event-detail-deprecated",level:2},{value:"Event Configuration (both event decorators)",id:"event-configuration-both-event-decorators",level:2},{value:"Bubbling and Preventing",id:"bubbling-and-preventing",level:3},{value:"The <code>fireDecoratorEvent</code> method",id:"the-firedecoratorevent-method",level:3},{value:"The <code>fireEvent</code> method",id:"the-fireevent-method",level:3},{value:"noConflict mode",id:"noconflict-mode",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"events",children:"Events"}),"\n",(0,s.jsx)(n.p,{children:"In this article, we will discuss events in the context of UI5 Web Components."}),"\n",(0,s.jsxs)(n.p,{children:["Components use ",(0,s.jsx)(n.code,{children:"CustomEvent"})," to inform developers of important state changes in the components. For example, the ",(0,s.jsx)(n.code,{children:"change"})," event is fired whenever the value of a ",(0,s.jsx)(n.code,{children:"ui5-input"})," is changed."]}),"\n",(0,s.jsxs)(n.h2,{id:"the-event-decorator",children:["The ",(0,s.jsx)(n.code,{children:"@event"})," Decorator"]}),"\n",(0,s.jsxs)(n.p,{children:["There are two ",(0,s.jsx)(n.code,{children:"@event"})," decorators available with the following imports:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import event from "@ui5/webcomponents-base/dist/decorators/event-strict.js"; // recommended for new develompent\n// or\nimport event from "@ui5/webcomponents-base/dist/decorators/event.js"; // deprecated\n'})}),"\n",(0,s.jsxs)(n.p,{children:["To define your own custom event, you need to use the ",(0,s.jsx)(n.code,{children:"@event"})," decorator."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"event"})," decorator is a class decorator that takes one required argument as a string to define the event name"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import UI5Element from "@ui5/webcomponents-base/dist/UI5Element.js";\nimport customElement from "@ui5/webcomponents-base/dist/decorators/customElement.js";\nimport event from "@ui5/webcomponents-base/dist/decorators/event-strict.js";\n\n@customElement("my-demo-component")\n@event("change")\nclass MyDemoComponent extends UI5Element {}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," This decorator is used only to describe the events of the component and is not meant to create emitters. See ",(0,s.jsx)(n.code,{children:"fireDecoratorEvent"})," below."]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsxs)(n.p,{children:["As mentioned earlier, the ",(0,s.jsx)(n.code,{children:"@event"})," decorator doesn't create event emitters. To notify developers of component changes, we have to fire events ourselves. This can be done using the ",(0,s.jsx)(n.code,{children:"fireEventDecoratorEvent"})," and the deprecated ",(0,s.jsx)(n.code,{children:"fireEvent"})," methods that come from the ",(0,s.jsx)(n.code,{children:"UI5Element"})," class. The difference between the methods is explained below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import UI5Element from "@ui5/webcomponents-base/dist/UI5Element.js";\nimport customElement from "@ui5/webcomponents-base/dist/decorators/customElement.js";\nimport property from "@ui5/webcomponents-base/dist/decorators/property.js";\nimport event from "@ui5/webcomponents-base/dist/decorators/event.js";\n\n@customElement("my-demo-component")\n@event("change")\nclass MyDemoComponent extends UI5Element {\n    @property()\n    value = "";\n\n    onNativeInputChange(e) {\n        this.value = e.target.value;\n        this.fireDecoratorEvent("change"); // or this.fireEvent("change");\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," By default, the ",(0,s.jsx)(n.code,{children:"fireDecoratorEvent"})," (and ",(0,s.jsx)(n.code,{children:"fireEvent"}),") method returns a boolean value that helps you understand whether the event was canceled (i.e., if the ",(0,s.jsx)(n.code,{children:"preventDefault"})," method was called)."]}),"\n",(0,s.jsxs)(n.h2,{id:"eventdetails-recommended",children:[(0,s.jsx)(n.code,{children:"eventDetails"})," (recommended)"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"eventDetails"})," class field is used to describe the types of events that the component emits. The strict event decorator is using this information for type checking the names."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'class MyComponent extends UI5Element {\n  eventDetails!: {\n    "selection-change": SelectionChangeDetails\n    "delete": void\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"This field doesn't have runtime semantics, it is only used to provide type information about the events that the component is firing and the corresponding types of the detail parameter."}),"\n",(0,s.jsxs)(n.h3,{id:"extending-the-eventdetails-with-more-events",children:["Extending the ",(0,s.jsx)(n.code,{children:"eventDetails"})," with more events"]}),"\n",(0,s.jsx)(n.p,{children:"If your component extends another component and you try to add new events, you will get a TypeScript error that the new events cannot be assigned to the same field in the base class"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"class TimeSelectionClocks extends TimePickerInternals {\n  eventDetails!: { // ts-error\n    \"close-picker\": void,\n  };\n\n// Property 'eventDetails' in type 'TimeSelectionClocks' is not assignable to the same property in base type 'TimePickerInternals'.\n"})}),"\n",(0,s.jsx)(n.p,{children:'In order to correctly extend the base class events, you need to add them as a type as well like this TimePickerInternals["eventDetails"]'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'class TimeSelectionClocks extends TimePickerInternals {\n  eventDetails!: TimePickerInternals["eventDetails"] & {\n    "close-picker": void,\n  };\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"event-detail-deprecated",children:"Event Detail (deprecated)"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"@event"})," decorator is generic and accepts a TypeScript type that describes its detail. This type is crucial for preventing incorrect detail data when the event is fired using ",(0,s.jsx)(n.code,{children:"fireDecoratorEvent"})," and ",(0,s.jsx)(n.code,{children:"fireEvent"})," methods (both generic) and for ensuring type safety when listening for the event, so you know what kind of detail data to expect."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," It's required to export all types that describe specific event details for all public events."]}),"\n",(0,s.jsx)(n.p,{children:"Here's an example implementation:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import UI5Element from "@ui5/webcomponents-base/dist/UI5Element.js";\nimport customElement from "@ui5/webcomponents-base/dist/decorators/customElement.js";\nimport property from "@ui5/webcomponents-base/dist/decorators/property.js";\nimport event from "@ui5/webcomponents-base/dist/decorators/event.js";\n\n// Define the event detail type\nexport type MyDemoComponentChangeEventDetail = {\n    valid: boolean;\n};\n\n@customElement("my-demo-component")\n@event<MyDemoComponentChangeEventDetail>("change", {\n    detail: {\n        valid: { type: Boolean },\n    },\n})\nclass MyDemoComponent extends UI5Element {\n    @property()\n    value = "";\n\n    onNativeInputChange(e: Event) {\n        this.fireEvent("change", {\n            valid: true,\n        });\n    }\n}\n\nexport { MyDemoComponent };\n'})}),"\n",(0,s.jsx)(n.h2,{id:"event-configuration-both-event-decorators",children:"Event Configuration (both event decorators)"}),"\n",(0,s.jsx)(n.h3,{id:"bubbling-and-preventing",children:"Bubbling and Preventing"}),"\n",(0,s.jsxs)(n.p,{children:["Whether the events should be cancelable or able to bubble is configurable.\nby setting ",(0,s.jsx)(n.code,{children:"cancelable"})," and ",(0,s.jsx)(n.code,{children:"bubbles"})," in the ",(0,s.jsx)(n.code,{children:"@event"})," decorator."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"cancelable: true"})," means the event can be prevented by calling the native ",(0,s.jsx)(n.code,{children:"preventDefault()"})," method in the event handler- by default it's ",(0,s.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"bubbles: true"})," means the event will bubble - by default it's ",(0,s.jsx)(n.code,{children:"false"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Since ",(0,s.jsx)(n.code,{children:"v2.4.0"})," this can be configured in the ",(0,s.jsx)(n.code,{children:"@event"})," decorator:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import UI5Element from "@ui5/webcomponents-base/dist/UI5Element.js";\nimport customElement from "@ui5/webcomponents-base/dist/decorators/customElement.js";\nimport event from "@ui5/webcomponents-base/dist/decorators/event.js";\n\n@customElement("my-demo-component")\n@event("change", {\n    bubbles: true // false by default\n    cancelable: true // false by default\n})\nclass MyDemoComponent extends UI5Element {\n\n    onSomeAction() {\n        this.fireDecoratorEvent("change")\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"the-firedecoratorevent-method",children:["The ",(0,s.jsx)(n.code,{children:"fireDecoratorEvent"})," method"]}),"\n",(0,s.jsxs)(n.p,{children:["The method is available since version ",(0,s.jsx)(n.code,{children:"v2.4.0"})," and it fires a custom event and gets the configuration for the event from the ",(0,s.jsx)(n.code,{children:"@event"})," decorator. It also strictly checks the details parameter agains the ",(0,s.jsx)(n.code,{children:"eventDetails"})," type for the same event name."]}),"\n",(0,s.jsxs)(n.p,{children:["Keep in mind that ",(0,s.jsx)(n.code,{children:"cancelable"})," and ",(0,s.jsx)(n.code,{children:"bubbles"})," are ",(0,s.jsx)(n.code,{children:"false"})," by default and you must explicitly enable them in the ",(0,s.jsx)(n.code,{children:"@event"})," decorator if required."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fire event with default configuration"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'@event("change")\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// Fires the event as NOT preventable and NOT bubbling\nthis.fireDecoratorEvent("change");\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fire event with non-default configuration"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'@event("change", {\n    bubbles: true // false by default\n    cancelable: true // false by default\n})\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// Fires the event as preventable and bubbling\nthis.fireDecoratorEvent("change");\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," since ",(0,s.jsx)(n.code,{children:"v2.4.0"})," it's recommended to describe the event in the ",(0,s.jsx)(n.code,{children:"@event"})," decorator and use the ",(0,s.jsx)(n.code,{children:"fireDecoratorEvent"})," method."]}),"\n",(0,s.jsxs)(n.h3,{id:"the-fireevent-method",children:["The ",(0,s.jsx)(n.code,{children:"fireEvent"})," method"]}),"\n",(0,s.jsxs)(n.p,{children:["The method is available since the very beginning of the project and like ",(0,s.jsx)(n.code,{children:"fireDecoratorEvent"})," fires a custom event, but does not consider the settings in the ",(0,s.jsx)(n.code,{children:"@event"})," decorator. So, if you set ",(0,s.jsx)(n.code,{children:"cancelable"})," and ",(0,s.jsx)(n.code,{children:"bubbles"})," in the ",(0,s.jsx)(n.code,{children:"@event"})," decorator, but fire the component events via ",(0,s.jsx)(n.code,{children:"fireEvent"}),", the configured values won't be considered."]}),"\n",(0,s.jsxs)(n.p,{children:["Another difference is the default values of the event settings. When using ",(0,s.jsx)(n.code,{children:"fireEvent"})," by default it assumes the event is bubbling (bubbles: true) and not preventable (cancelable: false)."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fire event with default configuration"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// Fires the event as NOT preventable and bubbling\nthis.fireEvent("change");\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fire event with non-default configuration"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The method allows configuring the ",(0,s.jsx)(n.code,{children:"cancelable"})," and ",(0,s.jsx)(n.code,{children:"bubbles"})," fields via function arguments - the third and fourth parameters respectively."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'// Fires the event as preventable and non-bubbling\nthis.fireEvent("change", {}, true, false);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"noconflict-mode",children:"noConflict mode"}),"\n",(0,s.jsxs)(n.p,{children:["By default, UI5 Web Components fire all custom events twice: once with their name (e.g., ",(0,s.jsx)(n.code,{children:"change"}),") and once more with a ",(0,s.jsx)(n.code,{children:"ui5-"})," prefix (e.g., ",(0,s.jsx)(n.code,{children:"ui5-change"}),"). For example, when the ",(0,s.jsx)(n.code,{children:"ui5-switch"})," is toggled, it fires a ",(0,s.jsx)(n.code,{children:"change"})," event and a ",(0,s.jsx)(n.code,{children:"ui5-change"})," event."]}),"\n",(0,s.jsxs)(n.p,{children:["This ",(0,s.jsx)(n.code,{children:"noConflict"})," setting allows us to prevent clashes between native and custom events."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"noConflict"})," setting (",(0,s.jsx)(n.code,{children:"@ui5/webcomponents-base/config/NoConflict.js"}),") controls this behavior:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"false"})," (default)"]}),": Events fire both with and without the ",(0,s.jsx)(n.code,{children:"ui5-"})," prefix."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"true"})}),": Events fire only with the ",(0,s.jsx)(n.code,{children:"ui5-"})," prefix, avoiding name collisions with third-party libraries."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Object"}),": Specific events listed in the object fire only with the ",(0,s.jsx)(n.code,{children:"ui5-"})," prefix, while all other events fire both ways. Example:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "events": ["selection-change", "header-click"]\n}\n'})}),"\n","In this case, only ",(0,s.jsx)(n.code,{children:"selection-change"})," and ",(0,s.jsx)(n.code,{children:"header-click"})," fire with the ",(0,s.jsx)(n.code,{children:"ui5-"})," prefix, leaving these names available for other uses."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," With this setting, when attaching an event listener to a UI5 web component used inside a template, the event name must be specified with the ui5- prefix."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},71184:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(14041);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);