"use strict";(self.webpackChunk_ui5_webcomponents_website=self.webpackChunk_ui5_webcomponents_website||[]).push([[465],{34809:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var t=s(31085),i=s(71184);const r={},o="Testing",c={id:"docs/development/testing",title:"Testing",description:"WDIO",source:"@site/docs/docs/4-development/10-testing.md",sourceDirName:"docs/4-development",slug:"/docs/development/testing",permalink:"/webcomponents/docs/development/testing",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"documentationSidebar",previous:{title:"Internationalization",permalink:"/webcomponents/docs/development/internationalization"},next:{title:"Deep dive and best practices",permalink:"/webcomponents/docs/development/deep-dive-and-best-practices"}},d={},l=[{value:"WDIO",id:"wdio",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Install ChromeDriver",id:"install-chromedriver",level:4},{value:"Running the tests",id:"running-the-tests",level:3},{value:"1. Test configuration",id:"1-test-configuration",level:4},{value:"2. Running all tests",id:"2-running-all-tests",level:4},{value:"3. Running a single test spec",id:"3-running-a-single-test-spec",level:4},{value:"Writing tests",id:"writing-tests",level:3},{value:"Debugging",id:"debugging",level:3},{value:"Best practices for writing tests",id:"best-practices-for-writing-tests",level:3},{value:"1. Do not overuse <code>assert.ok</code>",id:"1-do-not-overuse-assertok",level:4},{value:"2. Do not overuse <code>assert.strictEqual</code>",id:"2-do-not-overuse-assertstrictequal",level:4},{value:"3. Use <code>isExisting</code> to check the DOM",id:"3-use-isexisting-to-check-the-dom",level:4},{value:"4. Do not use <code>browser.executeAsync</code> for properties",id:"4-do-not-use-browserexecuteasync-for-properties",level:4},{value:"5. Use <code>assert.include</code> instead of string functions",id:"5-use-assertinclude-instead-of-string-functions",level:4},{value:"6. Extract variables before asserting",id:"6-extract-variables-before-asserting",level:4},{value:"Cypress",id:"cypress",level:2},{value:"Folder Structure",id:"folder-structure",level:3},{value:"Writing Tests",id:"writing-tests-1",level:3},{value:"Interacting with Components",id:"interacting-with-components",level:3},{value:"Changing Properties and Attributes",id:"changing-properties-and-attributes",level:4},{value:"Performing Actions",id:"performing-actions",level:4},{value:"Testing Events",id:"testing-events",level:3},{value:"Configuration",id:"configuration",level:3},{value:"Mobile Testing",id:"mobile-testing",level:3},{value:"Custom Commands",id:"custom-commands",level:3},{value:"Changing the language",id:"changing-the-language",level:3},{value:"Code coverage",id:"code-coverage",level:3}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"testing",children:"Testing"}),"\n",(0,t.jsx)(n.h2,{id:"wdio",children:"WDIO"}),"\n",(0,t.jsxs)(n.p,{children:["The test framework of choice for UI5 Web Components is ",(0,t.jsx)(n.a,{href:"https://webdriver.io/",children:"WebdriverIO"})," or WDIO for short.\nIt has a straightforward API - ",(0,t.jsx)(n.a,{href:"https://webdriver.io/docs/api.html",children:"https://webdriver.io/docs/api.html"}),", and has excellent support for Web Components."]}),"\n",(0,t.jsxs)(n.p,{children:["The browser of choice for test execution is ",(0,t.jsx)(n.a,{href:"https://www.google.com/chrome/",children:"Google Chrome"}),", respectively the WebDriver used is ",(0,t.jsx)(n.a,{href:"https://chromedriver.chromium.org/",children:"ChromeDriver"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsx)(n.h4,{id:"install-chromedriver",children:"Install ChromeDriver"}),"\n",(0,t.jsxs)(n.p,{children:["ChromeDriver is a peer dependency of ",(0,t.jsx)(n.code,{children:"@ui5/webcomponents-tools"}),". Therefore, you are expected to install and upgrade it manually."]}),"\n",(0,t.jsxs)(n.p,{children:["You can install it with ",(0,t.jsx)(n.code,{children:"npm"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"npm i --save-dev chromedriver"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["or with ",(0,t.jsx)(n.code,{children:"yarn"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"yarn add -D chromedriver"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Google Chrome and ChromeDriver need to be the same version to work together. Whenever you update Google Chrome on\nyour system (or it updates automatically, if allowed), you are expected to also update ChromeDriver to the respective version."]}),"\n",(0,t.jsx)(n.h3,{id:"running-the-tests",children:"Running the tests"}),"\n",(0,t.jsx)(n.h4,{id:"1-test-configuration",children:"1. Test configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The configuration for WDIO can be found in the ",(0,t.jsx)(n.code,{children:"config/"})," directory under ",(0,t.jsx)(n.code,{children:"wdio.conf.js"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["As explained ",(0,t.jsx)(n.a,{href:"/webcomponents/docs/development/package",children:"here"})," in the section about the ",(0,t.jsx)(n.code,{children:"config/"})," directory, you can\ncustomize, or even completely replace the default configuration."]}),"\n",(0,t.jsx)(n.p,{children:"However, before doing so, please note the following two benefits of working with the default configuration, provided by UI5 Web Components:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Hooks, synchronizing the execution of all relevant WDIO commands (e.g. ",(0,t.jsx)(n.code,{children:"click"}),", ",(0,t.jsx)(n.code,{children:"url"}),", ",(0,t.jsx)(n.code,{children:"$"}),", ",(0,t.jsx)(n.code,{children:"$$"}),") with the rendering of the framework to\nensure consistency when reading or changing the state of the components."]}),"\n",(0,t.jsxs)(n.li,{children:["Additional API methods: ",(0,t.jsx)(n.code,{children:"setProperty"}),", ",(0,t.jsx)(n.code,{children:"setAttribute"}),", ",(0,t.jsx)(n.code,{children:"removeAttribute"}),", ",(0,t.jsx)(n.code,{children:"hasClass"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"So our recommendation would be to modify it, if necessary, but not completely replace it."}),"\n",(0,t.jsx)(n.h4,{id:"2-running-all-tests",children:"2. Running all tests"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"npm run test"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"yarn test"})}),"\n",(0,t.jsxs)(n.p,{children:["This will ",(0,t.jsx)(n.em,{children:"launch a static server"})," and execute all tests found in the ",(0,t.jsx)(n.code,{children:"test/specs/"})," directory of your package."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Before running the tests for the first time, make sure you've built the project, or at least the dev server is running (",(0,t.jsx)(n.code,{children:"build"})," or ",(0,t.jsx)(n.code,{children:"start"})," commands)."]}),"\n",(0,t.jsx)(n.h4,{id:"3-running-a-single-test-spec",children:"3. Running a single test spec"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"npm run test test/specs/Demo.spec.js"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"yarn test test/specs/Demo.spec.js"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Executing a single test spec only makes sense for debugging purposes, therefore no test server is launched for it.\nMake sure you're running the ",(0,t.jsx)(n.code,{children:"start"})," command while running single test specs, as it provides a server and the ability to change\nfiles, and test the changes on the fly."]}),"\n",(0,t.jsx)(n.h3,{id:"writing-tests",children:"Writing tests"}),"\n",(0,t.jsx)(n.p,{children:"The simplest test would look something like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'describe("ui5-demo rendering", async () => {\n\tawait browser.url("test/pages/index.html");\n\n\tit("tests if web component is correctly rendered", async () => {\n\t\tconst innerContent = await browser.$("#myFirstComponent").shadow$("div");\n\t\tassert.ok(innerContent, "content rendered");\n\t});\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"Key points:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Load the test page with the ",(0,t.jsx)(n.code,{children:"browser.url"})," command. You can do this once for each test suite or for each individual test."]}),"\n",(0,t.jsxs)(n.li,{children:["You can access the web components with ",(0,t.jsx)(n.code,{children:"$"})," or ",(0,t.jsx)(n.code,{children:"$$"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["You can access the shadow roots with ",(0,t.jsx)(n.code,{children:"shadow$"})," or ",(0,t.jsx)(n.code,{children:"shadow$$"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Simulate mouse interaction with the web components by calling the ",(0,t.jsx)(n.code,{children:"click"})," command on the web component itself or certain parts of its shadow root."]}),"\n",(0,t.jsxs)(n.li,{children:["Simulate keyboard with the ",(0,t.jsx)(n.code,{children:"keys"})," command."]}),"\n",(0,t.jsxs)(n.li,{children:["You can read the DOM with commands such as ",(0,t.jsx)(n.code,{children:"getHTML"}),", ",(0,t.jsx)(n.code,{children:"getProperty"}),", ",(0,t.jsx)(n.code,{children:"getAttribute"}),", etc."]}),"\n",(0,t.jsxs)(n.li,{children:["You can modify the DOM with commands such as ",(0,t.jsx)(n.code,{children:"setProperty"}),", ",(0,t.jsx)(n.code,{children:"setAttribute"})," etc."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"For WDIO capabilities, see:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Official API: ",(0,t.jsx)(n.a,{href:"https://webdriver.io/docs/api.html",children:"https://webdriver.io/docs/api.html"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Additional commands provided in our standard WDIO configuration: ",(0,t.jsx)(n.code,{children:"setProperty"}),", ",(0,t.jsx)(n.code,{children:"setAttribute"}),", ",(0,t.jsx)(n.code,{children:"removeAttribute"}),", ",(0,t.jsx)(n.code,{children:"hasClass"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," The standard WDIO configuration we provide automatically synchronizes all test commands' execution with the framework rendering cycle.\nTherefore, in the example above, the ",(0,t.jsx)(n.code,{children:"shadow$"})," command will internally wait for all rendering to be over before being executed. The\nsame holds true for commands that modify the DOM such as ",(0,t.jsx)(n.code,{children:"setAttribute"})," or ",(0,t.jsx)(n.code,{children:"click"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"debugging",children:"Debugging"}),"\n",(0,t.jsx)(n.p,{children:"Debugging with WDIO is really simple. Just follow these 3 steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Change the WDIO configuration file ",(0,t.jsx)(n.code,{children:"config/wdio.conf.js"})," to disable ",(0,t.jsx)(n.code,{children:"headless"})," mode for Google Chrome as follows:"]}),"\n",(0,t.jsx)(n.p,{children:"From:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'module.exports = require("@ui5/webcomponents-tools/components-package/wdio.js");\n'})}),"\n",(0,t.jsx)(n.p,{children:"to:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const result = require(\"@ui5/webcomponents-tools/components-package/wdio.js\");\nresult.config.capabilities[0][\"goog:chromeOptions\"].args = ['--disable-gpu']; // From: ['--disable-gpu', '--headless']\nmodule.exports = result;\n"})}),"\n",(0,t.jsx)(n.p,{children:"If you happen to debug often, it's recommended to keep the file in this format and just comment out the middle line when you're done debugging."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set a breakpoint with ",(0,t.jsx)(n.code,{children:"browser.debug"})," somewhere in your test:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'it("tests if web component is correctly rendered", async () => {\n    const innerContent = await browser.$("#myFirstComponent").shadow$("div");\n    await browser.debug();\n    assert.ok(innerContent, "content rendered");\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For more on ",(0,t.jsx)(n.code,{children:"debug"}),", see ",(0,t.jsx)(n.a,{href:"https://webdriver.io/docs/api/browser/debug.html",children:"https://webdriver.io/docs/api/browser/debug.html"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the single test spec and wait for the browser to open and pause on your breakpoint:"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the dev server, if you haven't already:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"yarn start"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"npm run start"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Run the single test spec:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"yarn test test/specs/Demo.spec.js"})}),"\n",(0,t.jsx)(n.p,{children:"or"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"npm run test test/specs/Demo.spec.js"}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Google Chrome will then open in a new window, controlled by WDIO via the ChromeDriver, and your test will pause on your\nbreakpoint of choice. Proceed to debug normally."}),"\n",(0,t.jsx)(n.h3,{id:"best-practices-for-writing-tests",children:"Best practices for writing tests"}),"\n",(0,t.jsxs)(n.h4,{id:"1-do-not-overuse-assertok",children:["1. Do not overuse ",(0,t.jsx)(n.code,{children:"assert.ok"})]}),"\n",(0,t.jsxs)(n.p,{children:["When an ",(0,t.jsx)(n.code,{children:"assert.ok"}),' fails, the error you get is "Expected something to be true, but it was false". This is fine when you\'re passing a Boolean, but not ok when there is an expression inside ',(0,t.jsx)(n.code,{children:"assert.ok"})," and you'd like to know which part of the expression is not as expected."]}),"\n",(0,t.jsxs)(n.p,{children:["For example, when ",(0,t.jsx)(n.code,{children:'assert.ok(a === b, "They match")'})," fails, the error just says that an expression that was expected to be true was false. However, if you use ",(0,t.jsx)(n.code,{children:'assert.strictEqual(a, b, "They match")'}),", and it fails, the error will say that ",(0,t.jsx)(n.code,{children:"a"})," was expected to be a certain value, but it was another value, which makes it much easier to debug."]}),"\n",(0,t.jsx)(n.p,{children:"Prefer one of the following, when applicable:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.notOk(a)"})," instead of ",(0,t.jsx)(n.code,{children:"assert.ok(!a)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.strictEqual(a, b)"})," instead of ",(0,t.jsx)(n.code,{children:"assert.ok(a === b)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.isBelow(a, b)"})," instead of ",(0,t.jsx)(n.code,{children:"assert.ok(a < b)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.isAbove(a, b)"})," instead of ",(0,t.jsx)(n.code,{children:"assert.ok(a > b)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.exists"})," / ",(0,t.jsx)(n.code,{children:"assert.notExists"})," when checking for ",(0,t.jsx)(n.code,{children:"null"})," or ",(0,t.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"2-do-not-overuse-assertstrictequal",children:["2. Do not overuse ",(0,t.jsx)(n.code,{children:"assert.strictEqual"})]}),"\n",(0,t.jsx)(n.p,{children:"Use:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.ok"})," instead of ",(0,t.jsx)(n.code,{children:"assert.strictEqual(a, true)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"assert.notOk"})," instead of ",(0,t.jsx)(n.code,{children:"assert.strictEqual(a, false)"})]}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"3-use-isexisting-to-check-the-dom",children:["3. Use ",(0,t.jsx)(n.code,{children:"isExisting"})," to check the DOM"]}),"\n",(0,t.jsx)(n.p,{children:"Preferred:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"assert.ok(await browser.$(<SELECTOR>).isExisting())\n"})}),"\n",(0,t.jsx)(n.p,{children:"instead of:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"assert.ok((await browser.$$(<SELECTOR>)).length)\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"4-do-not-use-browserexecuteasync-for-properties",children:["4. Do not use ",(0,t.jsx)(n.code,{children:"browser.executeAsync"})," for properties"]}),"\n",(0,t.jsxs)(n.p,{children:["We have custom commands such as ",(0,t.jsx)(n.code,{children:"getProperty"})," and ",(0,t.jsx)(n.code,{children:"setProperty"})," to fill in gaps in the WDIO standard command set. Use them instead of manually setting properties with ",(0,t.jsx)(n.code,{children:"executeAsync"}),"."]}),"\n",(0,t.jsxs)(n.h4,{id:"5-use-assertinclude-instead-of-string-functions",children:["5. Use ",(0,t.jsx)(n.code,{children:"assert.include"})," instead of string functions"]}),"\n",(0,t.jsx)(n.p,{children:"Use:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'assert.include(text, EXPECTED_TEXT, "Text found")\nassert.notInclude(text, NOT_EXPECTED_TEXT, "Text not found")\n'})}),"\n",(0,t.jsx)(n.p,{children:"instead of:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'assert.ok(text.indexOf(EXPECTED_TEXT) > -1, "Text found")\nassert.ok(text.includes(EXPECTED_TEXT), "Text found")\nassert.notOk(text.includes(NOT_EXPECTED_TEXT), "Text not found")\n'})}),"\n",(0,t.jsx)(n.h4,{id:"6-extract-variables-before-asserting",children:"6. Extract variables before asserting"}),"\n",(0,t.jsxs)(n.p,{children:["Avoid complex expressions inside ",(0,t.jsx)(n.code,{children:"assert"}),"s by extracting parts of them to variables and only asserting the variables."]}),"\n",(0,t.jsx)(n.h2,{id:"cypress",children:"Cypress"}),"\n",(0,t.jsx)(n.h3,{id:"folder-structure",children:"Folder Structure"}),"\n",(0,t.jsxs)(n.p,{children:["Refer to the official Cypress documentation for detailed information on ",(0,t.jsx)(n.a,{href:"https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests#Folder-structure",children:"folder structure"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["For each package in your project, include a ",(0,t.jsx)(n.code,{children:"cypress"})," folder at the root level with the following subfolders:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"specs"})}),": Contains all test files."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"support"})}),": Includes additional functionality such as custom commands that can be reused across different components, as well as library-specific commands (e.g., commands for enforcing mobile testing)."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"writing-tests-1",children:"Writing Tests"}),"\n",(0,t.jsx)(n.p,{children:"To write tests for a specific component, create a file in the respective package's specs folder:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"{packageName}/cypress/specs/MyComponent.cy.tsx\n"})}),"\n",(0,t.jsxs)(n.p,{children:["We utilize component testing for UI5 web components, which involves mounting the component you intend to test. Our custom ",(0,t.jsx)(n.code,{children:"mount"})," function leverages ",(0,t.jsx)(n.code,{children:"preact"})," with ",(0,t.jsx)(n.code,{children:"JSX"})," syntax for rendering components."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example Test File:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'describe("MyComponent Rendering", () => {\n  it("MyComponent exists", () => {\n    cy.mount(<MyComponent></MyComponent>);\n\n    cy.get("[my-component]").should("exist");\n  });\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"interacting-with-components",children:"Interacting with Components"}),"\n",(0,t.jsx)(n.h4,{id:"changing-properties-and-attributes",children:"Changing Properties and Attributes"}),"\n",(0,t.jsxs)(n.p,{children:["Use Cypress's ",(0,t.jsx)(n.code,{children:"invoke"})," command to interact with component properties and attributes."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Reading and Setting Properties:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Read a property\ncy.get("[ui5-button]")\n  .should("have.prop", "myProp", "expectedValue");\n\n// Set a property\ncy.get("[ui5-button]")\n  .invoke("prop", "myProp", "newValue");\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Reading and Setting Attributes:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'// Read an attribute\ncy.get("[ui5-button]")\n  .should("have.attr", "my-attr", "expectedValue");\n\n// Set an attribute\ncy.get("[ui5-button]")\n  .invoke("attr", "my-attr", "newValue");\n'})}),"\n",(0,t.jsx)(n.h4,{id:"performing-actions",children:"Performing Actions"}),"\n",(0,t.jsxs)(n.p,{children:["Cypress's default events are simulated, meaning events like ",(0,t.jsx)(n.code,{children:"cy.click"})," or ",(0,t.jsx)(n.code,{children:"cy.type"})," are fired from JavaScript and may not always behave like real native events (",(0,t.jsx)(n.code,{children:"event.isTrusted"})," will be ",(0,t.jsx)(n.code,{children:"false"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["To simulate real user interactions, we use the ",(0,t.jsx)(n.a,{href:"https://github.com/dmtrKovalenko/cypress-real-events",children:(0,t.jsx)(n.code,{children:"cypress-real-events"})})," package, which dispatches actual browser events."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Comparison of Commands:"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cypress Command"}),(0,t.jsx)(n.th,{children:"cypress-real-events Command"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cy.click"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cy.realClick"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cy.type('a')"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cy.realPress('a')"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cy.type('text')"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"cy.realType('text')"})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Refer to the ",(0,t.jsx)(n.a,{href:"https://github.com/dmtrKovalenko/cypress-real-events",children:"cypress-real-events documentation"})," for more information and additional commands."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"testing-events",children:"Testing Events"}),"\n",(0,t.jsxs)(n.p,{children:["With Cypress component testing, we can efficiently verify if events are fired using ",(0,t.jsx)(n.code,{children:"cy.spy"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'cy.mount(<Button></Button>`);\n\ncy.get("[ui5-button]").then(($button) => {\n  cy.spy($button[0], "click").as("clickEvent");\n});\n\ncy.get("[ui5-button]").realClick();\n\ncy.get("@clickEvent").should("have.been.called");\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For more details, refer to the ",(0,t.jsxs)(n.a,{href:"https://docs.cypress.io/api/commands/spy",children:["Cypress ",(0,t.jsx)(n.code,{children:"cy.spy"})," documentation"]}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["To customize the configuration for a specific test, pass a configuration object as the second parameter to the ",(0,t.jsx)(n.code,{children:"mount"})," function. This configuration applies to the entire test page."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { getTheme } from "@ui5/webcomponents-base/dist/config/Theme.js";\nimport { resetConfiguration } from "@ui5/webcomponents-base/dist/InitialConfiguration.js";\n\ndescribe("Configuration Example", () => {\n  const config = {\n    theme: "sap_horizon_hcb",\n  };\n\n  before(() => {\n    cy.mount(<MyComponent></MyComponent>, {\n      ui5Configuration: config,\n    });\n\n    cy.wrap({ resetConfiguration })\n      .invoke("resetConfiguration", true);\n\n  });\n\n  it("should apply the new theme", () => {\n    cy.wrap({ getTheme })\n      .invoke("getTheme")\n      .should("be.equal", config.theme)\n  });\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The configuration persists across all subsequent tests until reset. If the configuration is intended for a specific test, ensure you call ",(0,t.jsx)(n.code,{children:"resetConfiguration"})," after the test completes."]}),"\n",(0,t.jsx)(n.li,{children:"You can directly import and use configuration functions from the respective packages."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import { setTheme, getTheme } from "@ui5/webcomponents-base/dist/config/Theme.js";\n\ndescribe("Direct Configuration", () => {\n  it("should change the theme", () => {\n    const newTheme = "sap_horizon_hcb";\n\n    cy.wrap({ setTheme })\n      .invoke("setTheme", newTheme)\n\n    cy.wrap({ getTheme })\n      .invoke("getTheme")\n      .should("be.equal", newTheme)\n  });\n});\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"mobile-testing",children:"Mobile Testing"}),"\n",(0,t.jsxs)(n.p,{children:["To simulate mobile testing conditions, use the ",(0,t.jsx)(n.code,{children:"ui5SimulateDevice"})," Cypress command. This command overrides the ",(0,t.jsx)(n.code,{children:"isPhone"})," function from ",(0,t.jsx)(n.code,{children:"Device.ts"})," to mimic mobile behavior without changing the user agent or opening a new browser."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'cy.mount(<Button></Button>);\n\ncy.ui5SimulateDevice("phone"); // Simulates a phone device\n\ncy.get("[ui5-button]").should("have.class", "ui5-button-mobile");\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"custom-commands",children:"Custom Commands"}),"\n",(0,t.jsx)(n.p,{children:"To create custom Cypress commands:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a new file in the ",(0,t.jsx)(n.code,{children:"cypress/support/commands"})," directory specific to your component."]}),"\n",(0,t.jsx)(n.li,{children:"Define your custom commands within this file."}),"\n",(0,t.jsxs)(n.li,{children:["Import these commands into the main ",(0,t.jsx)(n.code,{children:"commands.ts"})," file located in ",(0,t.jsx)(n.code,{children:"cypress/support"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Describe the TypeScript types for your commands within the Cypress namespace to ensure proper typing and IntelliSense support."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Example (",(0,t.jsx)(n.code,{children:"cypress/support/commands/myComponentCommands.ts"}),"):"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'Cypress.Commands.add("clickMyComponent", (selector) => {\n  cy.get(selector).click();\n});\n\ndeclare global {\n  namespace Cypress {\n    interface Chainable {\n      clickMyComponent(selector: string): Chainable<Element>;\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Importing in ",(0,t.jsx)(n.code,{children:"commands.ts"}),":"]})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import "./myComponentCommands";\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage in Tests:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'describe("My Component Tests", () => {\n  it("should click my component", () => {\n    cy.mount(<MyComponent></MyComponent>);\n\n    cy.clickMyComponent("my-component");\n  });\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"changing-the-language",children:"Changing the language"}),"\n",(0,t.jsx)(n.p,{children:"Locale-aware components often need to set the user's language for certain tests."}),"\n",(0,t.jsx)(n.p,{children:"Here is how you can do it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import Calendar from "../../src/Calendar.js";\nimport "../../src/Assets.js"; // Do not forget to import the Assets.js module for the extra languages\nimport { setLanguage, getLanguage } from "@ui5/webcomponents-base/dist/config/Language.js";\n\ndescribe("Test group", () => {\n\tit("Test", () => {\n\t\t// setLanguage("bg"); // Wrong, the promise will not be awaited!\n\n\t\tcy.wrap({ setLanguage })\n\t\t\t.invoke("setLanguage", "bg"); // Correct, the promise will be awaited!\n\n\t\tcy.wrap({ getLanguage })\n\t\t\t.invoke("getLanguage")\n\t\t\t.should("equal", "bg");\n\n\t\tcy.mount(<Calendar />); // This calendar will be in Bulgarian\n\t});\n});\n'})}),"\n",(0,t.jsx)(n.p,{children:"Notes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You must import the Assets module for the extra languages to work"}),"\n",(0,t.jsxs)(n.li,{children:["You must call ",(0,t.jsx)(n.code,{children:"setLanguage"})," with ",(0,t.jsx)(n.code,{children:"cy.wrap"})," to make sure it will be awaited until the desired language is completely set (CLDR assets are fetched)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"code-coverage",children:"Code coverage"}),"\n",(0,t.jsx)(n.p,{children:"Cypress tests automatically run with instrumentation switched on. To see the code coverage report, run the following commands:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# build the project\nyarn build\n# run the tests for a pacakge\ncd packages/main\nyarn test:cypress\n# start a static server in the `coverage` folder and inspect the results in the browser\nhttp-server coverage\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},71184:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>c});var t=s(14041);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);